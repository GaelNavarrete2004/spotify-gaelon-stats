{"ast":null,"code":"// spotifyAuth.js\n\nconst CLIENT_ID = \"79f742e2bb194cc2b9756caebc221c22\";\nconst REDIRECT_URI = \"http://localhost:3000/callback\";\nconst SCOPES = [\"user-read-private\", \"user-read-recently-played\", \"user-read-email\", \"user-top-read\", \"playlist-read-private\", \"playlist-modify-public\", \"playlist-modify-private\", \"user-library-read\", \"user-library-modify\"];\n\n/**\r\n * Generates the Spotify authentication URL for the Implicit Grant flow.\r\n * Redirects the user to Spotify's authorization page.\r\n */\nexport const getAuthUrl = () => {\n  return \"https://accounts.spotify.com/authorize?\" + `client_id=${CLIENT_ID}&` + `response_type=token&` +\n  // Use 'token' to get access token directly\n  `redirect_uri=${encodeURIComponent(REDIRECT_URI)}&` + `scope=${encodeURIComponent(SCOPES.join(\" \"))}`;\n};\n\n/**\r\n * Fetches data from the Spotify API using the access token stored in localStorage.\r\n * @param {string} endpoint - The endpoint to fetch from (e.g., \"/me\").\r\n * @returns {Promise<Object>} The response data from Spotify API.\r\n */\nexport const fetchFromSpotify = async endpoint => {\n  const token = localStorage.getItem(\"spotifyAccessToken\");\n  if (!token) {\n    throw new Error(\"Access token is missing\");\n  }\n  const response = await fetch(`https://api.spotify.com/v1${endpoint}`, {\n    headers: {\n      Authorization: `Bearer ${token}`\n    }\n  });\n  if (!response.ok) {\n    throw new Error(\"Failed to fetch data from Spotify\");\n  }\n  return response.json();\n};","map":{"version":3,"names":["CLIENT_ID","REDIRECT_URI","SCOPES","getAuthUrl","encodeURIComponent","join","fetchFromSpotify","endpoint","token","localStorage","getItem","Error","response","fetch","headers","Authorization","ok","json"],"sources":["C:/Users/gael1/spotify-gaelon-stats/src/spotifyAuth.js"],"sourcesContent":["// spotifyAuth.js\r\n\r\nconst CLIENT_ID = \"79f742e2bb194cc2b9756caebc221c22\";\r\nconst REDIRECT_URI = \"http://localhost:3000/callback\";\r\nconst SCOPES = [\r\n  \"user-read-private\",\r\n  \"user-read-recently-played\",\r\n  \"user-read-email\",\r\n  \"user-top-read\",\r\n  \"playlist-read-private\",\r\n  \"playlist-modify-public\",\r\n  \"playlist-modify-private\",\r\n  \"user-library-read\",\r\n  \"user-library-modify\",\r\n];\r\n\r\n/**\r\n * Generates the Spotify authentication URL for the Implicit Grant flow.\r\n * Redirects the user to Spotify's authorization page.\r\n */\r\nexport const getAuthUrl = () => {\r\n  return (\r\n    \"https://accounts.spotify.com/authorize?\" +\r\n    `client_id=${CLIENT_ID}&` +\r\n    `response_type=token&` + // Use 'token' to get access token directly\r\n    `redirect_uri=${encodeURIComponent(REDIRECT_URI)}&` +\r\n    `scope=${encodeURIComponent(SCOPES.join(\" \"))}`\r\n  );\r\n};\r\n\r\n/**\r\n * Fetches data from the Spotify API using the access token stored in localStorage.\r\n * @param {string} endpoint - The endpoint to fetch from (e.g., \"/me\").\r\n * @returns {Promise<Object>} The response data from Spotify API.\r\n */\r\nexport const fetchFromSpotify = async (endpoint) => {\r\n  const token = localStorage.getItem(\"spotifyAccessToken\");\r\n\r\n  if (!token) {\r\n    throw new Error(\"Access token is missing\");\r\n  }\r\n\r\n  const response = await fetch(`https://api.spotify.com/v1${endpoint}`, {\r\n    headers: {\r\n      Authorization: `Bearer ${token}`,\r\n    },\r\n  });\r\n\r\n  if (!response.ok) {\r\n    throw new Error(\"Failed to fetch data from Spotify\");\r\n  }\r\n\r\n  return response.json();\r\n};\r\n"],"mappings":"AAAA;;AAEA,MAAMA,SAAS,GAAG,kCAAkC;AACpD,MAAMC,YAAY,GAAG,gCAAgC;AACrD,MAAMC,MAAM,GAAG,CACb,mBAAmB,EACnB,2BAA2B,EAC3B,iBAAiB,EACjB,eAAe,EACf,uBAAuB,EACvB,wBAAwB,EACxB,yBAAyB,EACzB,mBAAmB,EACnB,qBAAqB,CACtB;;AAED;AACA;AACA;AACA;AACA,OAAO,MAAMC,UAAU,GAAGA,CAAA,KAAM;EAC9B,OACE,yCAAyC,GACzC,aAAaH,SAAS,GAAG,GACzB,sBAAsB;EAAG;EACzB,gBAAgBI,kBAAkB,CAACH,YAAY,CAAC,GAAG,GACnD,SAASG,kBAAkB,CAACF,MAAM,CAACG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE;AAEnD,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMC,gBAAgB,GAAG,MAAOC,QAAQ,IAAK;EAClD,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,oBAAoB,CAAC;EAExD,IAAI,CAACF,KAAK,EAAE;IACV,MAAM,IAAIG,KAAK,CAAC,yBAAyB,CAAC;EAC5C;EAEA,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,6BAA6BN,QAAQ,EAAE,EAAE;IACpEO,OAAO,EAAE;MACPC,aAAa,EAAE,UAAUP,KAAK;IAChC;EACF,CAAC,CAAC;EAEF,IAAI,CAACI,QAAQ,CAACI,EAAE,EAAE;IAChB,MAAM,IAAIL,KAAK,CAAC,mCAAmC,CAAC;EACtD;EAEA,OAAOC,QAAQ,CAACK,IAAI,CAAC,CAAC;AACxB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}